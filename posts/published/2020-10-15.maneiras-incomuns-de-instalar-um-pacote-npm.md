---
path: /maneiras-incomuns-de-instalar-um-pacote-npm

title: Maneiras incomuns de instalar um pacote NPM
subtitle: Alguma delas ainda pode te ajudar em algum projeto
date: 2020-10-15
tags:
  - dev
  - js

banner:
  author: Edu Grande
  href: https://unsplash.com/photos/0vY082Un2pk
  image: ./images/2020-10-15.maneiras-incomuns-de-instalar-um-pacote-npm/banner.jpg
---

Ã‰ comum instalar pacotes e dependÃªncias com as opÃ§Ãµes mais comuns: usando `-g` ou `--global` para instalar um pacote globalmente, `--save` ou `-s` para dependÃªncias que devem ser utilizadas em ambiente de produÃ§Ã£o (`dependencies`) e `--save-dev` ou `-D` para dependÃªncias que sÃ³ devem ser instaladas em ambiente de desenvolvimento (`devDependencies`). Talvez vocÃª atÃ© jÃ¡ tenha manipulado outros tipos de dependÃªncias (como `peerDependencies`).

No entanto, existem algumas outras formas de instalar um pacote que podem ser Ãºteis para seu projeto. Sejam elas relacionadas ao registro (ou _registry_) do [NPM](https://www.npmjs.com/) ou nÃ£o. Algumas delas podem te ajudar em ambientes de produÃ§Ã£o e outras podem facilitar seu fluxo de desenvolvimento local.

### Instalando via Git/Github
Instalar um pacote NPM via Git/Github Ã© possÃ­vel, caso vocÃª nÃ£o tenha uma biblioteca ou algum projeto publicado e queira instalar como uma dependÃªncia.

Para fazer isso, basta executar o conhecido `npm install` ou `npm i` e informar `nome-de-usuario/repositorio` do seu pacote npm.

Ou seja, imaginando um projeto como `https://github.com/gabrieluizramos/hooks`, basta executar:
```sh
npm i gabrieluizramos/hooks
```

Que isso instalarÃ¡ o projeto como um pacote NPM para vocÃª utilizar.

ApÃ³s instalar dessa forma, vocÃª verÃ¡ que seu `package.json` possuirÃ¡ as informaÃ§Ãµes do pacote corretamente:
```json
{
  "dependencies": {
    "hooks": "github:gabrieluizramos/hooks",
  }
}
```

VocÃª tambÃ©m pode instalar informando a url do `git` diretamente, como:
```sh
npm i https://github.com/gabrieluizramos/hooks.git
```

Isso tambÃ©m funciona perfeitamente! No entanto, agora seu `package.json` apontarÃ¡ para essa URL:
```json
{
  "dependencies": {
    "hooks": "git+https://github.com/gabrieluizramos/hooks.git",
  }
}
```

### Instalando localmente via NPM link
Talvez vocÃª jÃ¡ conheÃ§a essa maneira e atÃ© jÃ¡ tenha utilizado. Possui algum cÃ³digo que quer reutilizar em outro projeto? Talvez `npm link` funcione bem.

Vamos imaginar que vocÃª estÃ¡ desenvolvendo o `projeto-super-secreto` e fez uma biblioteca chamada `lib-ultra-secreta`.

Na pasta da sua `lib-ultra-secreta`, vocÃª pode executar:
```sh
npm link
```

Esse comando criarÃ¡ um link simbÃ³lico (ou _symlink_) do seu projeto NPM (no caso, a `lib-ultra-secreta`) nas suas dependÃªncias globais.

Feito isso, basta ir no seu `projeto-super-secreto` e executar:
```sh
npm link lib-ultra-secreta
```

Isso irÃ¡ "apontar" o pacote `lib-ultra-secreta` do seu projeto, para o link simbÃ³lico criado globalmente na sua mÃ¡quina. Bacana, nÃ£o?

SÃ³ nÃ£o se esqueÃ§a de remover esses links todos ao finalizar o desenvolvimento.


Para fazer isso, na sua `lib-ultra-secreta` execute:
```sh
npm unlink
```

E no seu `projeto-super-secreto`, respectivamente:
```sh
npm unlink lib-ultra-secreta
```

### Instalando localmente via _file://_
Tive que utilizar essa maneira recentemente. Bem parecido com o processo utilizando `npm link`.

No cenÃ¡rio acima, poderÃ­amos estar no `projeto-super-secreto` e executar o comando:
```sh
npm i ../caminho/da/lib-ultra-secreta
```

Isso tambÃ©m instalaria o pacote mas, dessa vez, utilizando o protocolo `file`. Igual quando abrimos um arquivo no navegador e acessamos utilizando esse mesmo protocolo, lembra?

### Instalando localmente com Verdaccio
A Ãºltima opÃ§Ã£o e provavelmente a mais robusta Ã© utilizando [Verdaccio](https://verdaccio.org/).

O que o Verdaccio faz Ã©, basicamente, criar um registro do NPM de forma privada localmente. Dessa forma, vocÃª consegue publicar e instalar pacotes apontando para esse registro local.

VocÃª precisar instalÃ¡-lo de forma global:
```sh
npm i -g verdaccio
```

ApÃ³s isso, Ã© sÃ³ executar:
```sh
verdaccio
```

E um processo iniciarÃ¡ o registro local e deverÃ¡ ficar rodando. VocÃª deverÃ¡ deixar essa janela do terminal aberta.

Acesse o painel do Verdaccio atravÃ©s da porta `4873` localmente (`localhost:4873`) e siga algumas pequenas configuraÃ§Ãµes (para realizar login). Essa etapa Ã© importante para que vocÃª possa configurar seu projeto para publicar/instalar algum pacote utilizando esse registro privado.

Para adicionar o registro localmente, Ã© sÃ³ rodar:
```sh
npm adduser --registry http://localhost:4873
```

Com isso, indicar um usuÃ¡rio/senha para esse registro. Com isso, tudo jÃ¡ estarÃ¡ configurado. Para publicar algum projeto no registro do Verdaccio, basta executar o `publish` padrÃ£o informando a URL:
```sh
npm publish --registry http://localhost:4873
```

E para instalar, tambÃ©m:
```sh
npm i lib-ultra-secreta --registry http://localhost:4873
```

### Ã‰ isso aÃ­! ğŸ“¦
Particularmente utilizo bastante o `npm link`, jÃ¡ usei o `Verdaccio` e a instalaÃ§Ã£o via `git` algumas vezes e, recentemente, utilizei o link atravÃ©s do protocolo `file://` e funcinou bem tambÃ©m.

Espero que alguma dessas diferentes formas de instalar um pacote possa te ajudar em algum projeto por aÃ­.
